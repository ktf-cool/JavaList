# 异常

## 一、声明检查型异常
- 1.要在这个方法的首部指出这个方法可能抛出的一个异常，使用 **throws** 关键字。例如
~~~
public FileInputStream(String name) throws FiltNotFoundException {  ...  }
~~~

- 2.需要声明异常的情况：
~~~
    * 调用了一个抛出检查型异常的方法。
    * 检测到一个错误，并且用到throw语句抛出一个检查型异常。
    * 程序出现错误。
    * Java虚拟机或运行时库出现内部错误。
~~~

- 3.注意：
    - 如果一个方法有多个异常，就在方法首部列出所有异常，之间用逗号分隔。也可以列出这些异常的一个父类。
    - 如果子类覆盖了父类的一个方法，那么子类方法中声明的检查型异常不能比父类方法中声明的异常更通用。如果父类方法没有抛出任何检查型异常，子类方法也不能抛出任何检查型异常.
![image](https://github.com/ktf-cool/JavaList/blob/master/images/%E5%BC%82%E5%B8%B81.png)
  
## 二、如何抛出异常

- throw new 异常类型；
- 抛出异常的步骤：
~~~
   1.找到一个合适的异常类。
   2.创建这个类的一个对象。
   3.将对象抛出。
~~~

### 三、捕获异常

- 1.捕获一个异常，设置try/catch语句块
~~~
    try{
           code
           more code
        }
      catch(ExceptionType e)
      {
           handle for this type
       }
~~~

- 2.执行流程
     - 如果try语句中的中任何代码抛出了catch子句中指定的一个异常类：
           1.程序将跳过try语句中的其他代码。
           2.程序将执行catch子句中的处理器代码。
     - 如果try语句块中没有抛出任何异常，那么程序将跳过catch语句。
     - 如果方法中抛出了catch子句中没有声明的异常，方法就会立即退出。
- 3.处理异常的方法
     - 要捕获那些你知道如何处理的异常，继续传播那些你不知道怎么处理的异常。
     
- 4.捕获多个异常
~~~
     try{
          code that may throw exceptions
         } catch ( FileNotFoundException e) {
                    emergency action for missing files
              } catch ( UnkonwnHostExcetion e )  {
                         emergency action for unknow hosts
                }
            
~~~

## 四、finally子句

- 1.语法
~~~
      try {
              code that may throw exceptions
           } catch (ExceptionType e) {
                     handle for this type
               } finally {
                     must be execute
                   }
       注意：try 语句可以只有 finally 语句而没有catch 语句。也可以使用嵌套的try语句。
~~~

- 2.**警告**：当finally语句中有return 语句时，返回的结果 会覆盖 try语句中return返回的结果（假设 try 语句中有return 语句），
           所以， try 语句主要用于清理资源，不要把改变控制流的语句（ **return, throw, break, continue**）放入finally 子句中。

## 五、try-with-Resources语句
- try-with-Resources语句的最简形式：
~~~
try(Resource res = ...)    //可以指定多个资源
{
   work with res
}
~~~

try 块退出时，会自动调用 res.close. 
> try-with-Resources语句自身也可以有catch语句，甚至还可以有一个finally子句，这些子句都会在关闭资源之后执行。
