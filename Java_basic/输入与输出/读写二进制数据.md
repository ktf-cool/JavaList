# 读写二进制数据

## 一、DataInputStream 和 DataOutput 接口

- `DataOutput`接口定义了下面用于以二进制格式写数组、字符、`boolean`值和字符串的方法：

| `writeChar`  | `writeFloat`   |
| ------------ | -------------- |
| `wirteBytes` | `writeDouble`  |
| `writeShort` | `writeChar`    |
| `writeInt`   | `writeBoolean` |
| `writeLong`  | `writeUTF`     |

> 例如：`writeInt` 总是将一个整数 写出为4字节的二进制数量值，而不管它有多少位。

> `writeUTF`方法使用8位Unicode转换格式写出字符串。

- 为了读回数据，可以使用在`DataInput`接口中定义的下列方法：

| `readChar`  | `readFloat`   |
| ----------- | ------------- |
| `readBytes` | `readDouble`  |
| `readShort` | `readChar`    |
| `readInt`   | `readBoolean` |
| `readLong`  | `readUTF`     |

> `DataInputStream`类实现了`DataInput`接口，为了从文件中读入二进制数据，可以将`DataInputStream`与某个字节源相组合，例如`FileInputStream`:

```java
var in = new DataInputStream(new FileInputStream("employee.dat"));
```

> 写出二进制数据也是如此。



## 二、随机访问文件

- `RandomAccessFile`类可以在文件中的任何位置查找或写入数据。磁盘文件都是随机访问的，但是与网络套接字通信的输入/输出流却不是。
- 打开一个随机访问文件，只用于读入或者同时用于读写，可以通过使用字符串“`r`"（用于读入访问或”`rw`"（用于读入/写出访问）作为构造器的第二个参数来指定这个选项。

```java
var in = new RandomAccessFile("employee.dat","r");
var inOut = new RandomAccessFile("employee.dat","rw");
```

> 当你将已有文件作为`RandomAccessFile`打开时，这个文件并不会被删除。

- 随机访问文件有一个表示下一个将被读入或写出的字节所处位置的文件指针，`seek`方法可以用来将这个文件指针设置到文件中的任意字节位置，`seek`的参数是一个`long`类型的整数，它的值位于`0`到文件按照字节来度量的长度之间。

> `getFilePointer`方法将返回文件指针的当前位置。

- `RandomAccessFile`类同时实现了`DataInput`和`DataOutput`接口。

- 要确定文件中的字节总数，可以使用`length`方法，而记录的总数则等于用字节总数除以每条记录的大小。

```java
long nbytes = in.length();  // length in bytes
int nrecords = (int) (nbytes / RECORD_SIZE)；
```

