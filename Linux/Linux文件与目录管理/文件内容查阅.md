# 文件内容查阅

## 一、直接检视文件内容

- cat （concatenate）

```
[root@study ~]# cat [-AbEnTv]
选项与参数：
-A ：相当于 -vET 的整合选项，可列出一些特殊字符而不是空白而已；
-b ：列出行号，仅针对非空白行做行号显示，空白行不标行号！
-E ：将结尾的断行字符 $ 显示出来；
-n ：打印出行号，连同空白行也会有行号，与 -b 的选项不同；
-T ：将 [tab] 按键以 ^I 显示出来；
-v ：列出一些看不出来的特殊字符
范例一：检阅 /etc/issue 这个文件的内容
[root@study ~]# cat /etc/issue
\S
Kernel \r on an \m
范例二：承上题，如果还要加印行号呢？
[root@study ~]# cat -n /etc/issue
1 \S
2 Kernel \r on an \m
3
# 所以这个文件有三行！看到了吧！可以印出行号呢！这对于大文件要找某个特定的行时，有点用处！
# 如果不想要编排空白行的行号，可以使用“cat -b /etc/issue”，自己测试看看：
范例三：将 /etc/man_db.conf 的内容完整的显示出来（包含特殊字符）
[root@study ~]# cat -A /etc/man_db.conf
# $
....（中间省略）....
MANPATH_MAP^I/bin^I^I^I/usr/share/man$
MANPATH_MAP^I/usr/bin^I^I/usr/share/man$
MANPATH_MAP^I/sbin^I^I^I/usr/share/man$
MANPATH_MAP^I/usr/sbin^I^I/usr/share/man$
.....（下面省略）.....
# 上面的结果限于篇幅，鸟哥删除掉很多数据了。另外，输出的结果并不会有特殊字体，
# 鸟哥上面的特殊字体是要让您发现差异点在哪里就是了。基本上，在一般的环境中，
# 使用 [tab] 与空白键的效果差不多，都是一堆空白啊！我们无法知道两者的差别。
# 此时使用 cat -A 就能够发现那些空白的地方是啥鬼东西了！[tab]会以 ^I 表示，
# 断行字符则是以 $ 表示，所以你可以发现每一行后面都是 $ 啊！不过断行字符
# 在Windows/Linux则不太相同，Windows的断行字符是 ^M$ 啰。
# 这部分我们会在[第九章 vim 软件](../Text/index.html#tips_dos)的介绍时，再次的说明到喔！
```

- tac （反向列示）

```
[root@study ~]# tac /etc/issue
Kernel \r on an \m
\S
# 嘿嘿！与刚刚上面的范例一比较，是由最后一行先显示喔！
```

- nl （添加行号打印）

```
[root@study ~]# nl [-bnw] 文件
选项与参数：
-b ：指定行号指定的方式，主要有两种：
-b a ：表示不论是否为空行，也同样列出行号（类似 cat -n）；
-b t ：如果有空行，空的那一行不要列出行号（默认值）；
-n ：列出行号表示的方法，主要有三种：
-n ln ：行号在屏幕的最左方显示；
-n rn ：行号在自己字段的最右方显示，且不加 0 ；
-n rz ：行号在自己字段的最右方显示，且加 0 ；
-w ：行号字段的占用的字符数。
范例一：用 nl 列出 /etc/issue 的内容
[root@study ~]# nl /etc/issue
1 \S
2 Kernel \r on an \m
# 注意看，这个文件其实有三行，第三行为空白（没有任何字符），
# 因为他是空白行，所以 nl 不会加上行号喔！如果确定要加上行号，可以这样做：
[root@study ~]# nl -b a /etc/issue
1 \S
2 Kernel \r on an \m
3
# 呵呵！行号加上来啰～那么如果要让行号前面自动补上 0 呢？可这样
[root@study ~]# nl -b a -n rz /etc/issue
000001 \S
000002 Kernel \r on an \m
000003
# 嘿嘿！自动在自己字段的地方补上 0 了～默认字段是六位数，如果想要改成 3 位数？
[root@study ~]# nl -b a -n rz -w 3 /etc/issue
001 \S
002 Kernel \r on an \m
003
# 变成仅有 3 位数啰～
```

## 二、可翻页检视

- more （一页一页翻动）

```
[root@study ~]# more /etc/man_db.conf
###
This file is used by the man-db package to configure the man and cat paths.
# It is also used to provide a manpath for those without one by examining
# their PATH environment variable. For details see the manpath（5） man page.
# .....（中间省略）.....
--More--（28%） &lt;== 重点在这一行喔！你的光标也会在这里等待你的指令
```

- [ ] 在 more 这个程序的运行过程中，你有几个按键可以按的：

- 空白键 （space）：代表向下翻一页；
- Enter ：代表向下翻“一行”；
- /字串 ：代表在这个显示的内容当中，向下搜寻“字串”这个关键字；
- :f ：立刻显示出文件名以及目前显示的行数；
- q ：代表立刻离开 more ，不再显示该文件内容。
- b 或 [ctrl]-b ：代表往回翻页，不过这动作只对文件有用，对管线无用。



- less （一页一页翻动）

```
[root@study ~]# less /etc/man_db.conf
###
This file is used by the man-db package to configure the man and cat paths.
# It is also used to provide a manpath for those without one by examining
# their PATH environment variable. For details see the manpath（5） man page.
# .....（中间省略）.....
: &lt;== 这里可以等待你输入指令！
```

- [ ] 可以输入的指令有：

  - 空白键 ：向下翻动一页；
  - [pagedown]：向下翻动一页；
  - [pageup] ：向上翻动一页；
  - /字串 ：向下搜寻“字串”的功能；
  - ?字串 ：向上搜寻“字串”的功能；
  - n ：重复前一个搜寻 （与 / 或 ? 有关！）
  - N ：反向的重复前一个搜寻 （与 / 或 ? 有关！）
  - g ：前进到这个数据的第一行去；
  - G ：前进到这个数据的最后一行去 （注意大小写）；
  - q ：离开 less 这个程序；

  

  ## 三、数据撷取

  - head （取出前面几行）

```
[root@study ~]# head [-n number] 文件
选项与参数：
-n ：后面接数字，代表显示几行的意思
[root@study ~]# head /etc/man_db.conf
# 默认的情况中，显示前面十行！若要显示前 20 行，就得要这样：
[root@study ~]# head -n 20 /etc/man_db.conf
范例：如果后面100行的数据都不打印，只打印/etc/man_db.conf的前面几行，该如何是好？
[root@study ~]# head -n -100 /etc/man_db.conf
```

- tail （取出后面几行）

```
[root@study ~]# tail [-n number] 文件
选项与参数：
-n ：后面接数字，代表显示几行的意思
-f ：表示持续侦测后面所接的文件名，要等到按下[ctrl]-c才会结束tail的侦测
[root@study ~]# tail /etc/man_db.conf
# 默认的情况中，显示最后的十行！若要显示最后的 20 行，就得要这样：
[root@study ~]# tail -n 20 /etc/man_db.conf
范例一：如果不知道/etc/man_db.conf有几行，却只想列出100行以后的数据时？
[root@study ~]# tail -n +100 /etc/man_db.conf
范例二：持续侦测/var/log/messages的内容
[root@study ~]# tail -f /var/log/messages
&lt;==要等到输入[crtl]-c之后才会离开tail这个指令的侦测！
```



## 四、非纯文本文件： od

```
[root@study ~]# od [-t TYPE] 文件
选项或参数：
-t ：后面可以接各种“类型 （TYPE）”的输出，例如：
a ：利用默认的字符来输出；
c ：使用 ASCII 字符来输出
d[size] ：利用十进制（decimal）来输出数据，每个整数占用 size Bytes ；
f[size] ：利用浮点数值（floating）来输出数据，每个数占用 size Bytes ；
o[size] ：利用八进位（octal）来输出数据，每个整数占用 size Bytes ；
x[size] ：利用十六进制（hexadecimal）来输出数据，每个整数占用 size Bytes ；
范例一：请将/usr/bin/passwd的内容使用ASCII方式来展现！
[root@study ~]# od -t c /usr/bin/passwd
0000000 177 E L F 002 001 001 \0 \0 \0 \0 \0 \0 \0 \0 \0
0000020 003 \0 &gt; \0 001 \0 \0 \0 364 3 \0 \0 \0 \0 \0 \0
0000040 @ \0 \0 \0 \0 \0 \0 \0 x e \0 \0 \0 \0 \0 \0
0000060 \0 \0 \0 \0 @ \0 8 \0 \t \0 @ \0 035 \0 034 \0
0000100 006 \0 \0 \0 005 \0 \0 \0 @ \0 \0 \0 \0 \0 \0 \0
.....（后面省略）....
# 最左边第一栏是以 8 进位来表示Bytes数。以上面范例来说，第二栏0000020代表开头是
# 第 16 个 byes （2x8） 的内容之意。
范例二：请将/etc/issue这个文件的内容以8进位列出储存值与ASCII的对照表
[root@study ~]# od -t oCc /etc/issue
0000000 134 123 012 113 145 162 156 145 154 040 134 162 040 157 156 040
\ S \n K e r n e l \ r o n
0000020 141 156 040 134 155 012 012
a n \ m \n \n
0000027
# 如上所示，可以发现每个字符可以对应到的数值为何！要注意的是，该数值是 8 进位喔！
# 例如 S 对应的记录数值为 123 ，转成十进制：1x8^2+2x8+3=83。
```



## 五、修改文件时间或创建新文件： touch

- **modification time （mtime）**： 当该文件的“内容数据”变更时，就会更新这个时间！内
  容数据指的是文件的内容，而不是文件的属性或权限喔！

- **status time （ctime）**： 当该文件的“状态 （status）”改变时，就会更新这个时间，举
  例来说，像是权限与属性被更改了，都会更新这个时间啊。

- **access time （atime）**： 当“该文件的内容被取用”时，就会更新这个读取时间
  （access）。举例来说，我们使用 cat 去读取 /etc/man_db.conf ， 就会更新该文件的
  atime 了

```
[root@study ~]# touch [-acdmt] 文件
选项与参数：
-a ：仅修订 access time；
-c ：仅修改文件的时间，若该文件不存在则不创建新文件；
-d ：后面可以接欲修订的日期而不用目前的日期，也可以使用 --date="日期或时间"
-m ：仅修改 mtime ；
-t ：后面可以接欲修订的时间而不用目前的时间，格式为[YYYYMMDDhhmm]
范例一：新建一个空的文件并观察时间
[dmtsai@study ~]# cd /tmp
[dmtsai@study tmp]# touch testtouch
[dmtsai@study tmp]# ls -l testtouch
-rw-rw-r--. 1 dmtsai dmtsai 0 Jun 16 00:45 testtouch
# 注意到，这个文件的大小是 0 呢！在默认的状态下，如果 touch 后面有接文件，
# 则该文件的三个时间 （atime/ctime/mtime） 都会更新为目前的时间。若该文件不存在，
# 则会主动的创建一个新的空的文件喔！例如上面这个例子！
范例二：将 ~/.bashrc 复制成为 bashrc，假设复制完全的属性，检查其日期
[dmtsai@study tmp]# cp -a ~/.bashrc bashrc
[dmtsai@study tmp]# date; ll bashrc; ll --time=atime bashrc; ll --time=ctime bashrc
Tue Jun 16 00:49:24 CST 2015 &lt;==这是目前的时间
-rw-r--r--. 1 dmtsai dmtsai 231 Mar 6 06:06 bashrc &lt;==这是 mtime
-rw-r--r--. 1 dmtsai dmtsai 231 Jun 15 23:44 bashrc &lt;==这是 atime
-rw-r--r--. 1 dmtsai dmtsai 231 Jun 16 00:47 bashrc &lt;==这是 ctime
```

> touch 这个指令最常被使用的情况是：

- 创建一个空的文件；
- 将某个文件日期修订为目前 （mtime 与 atime）。
