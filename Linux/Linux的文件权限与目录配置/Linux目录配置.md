# Linux为目录配置

## 一、Linux目录配置的依据 - FHS

- **FHS标椎**：规范每个特定的目录下应该要放置什么样子的数据。
- FHS依据文件系统使用的频繁与否与是否允许使用者随意更动， 而将目录定义成为四种交互作用的形态，如表：

|                              | 可分享的（shareable）        | 不可分享的（unshareable）  |
| ---------------------------- | ---------------------------- | -------------------------- |
| 不变的（static）             | /usr （软件放置处）          | /etc （配置文件）          |
| /opt （第三方协力软件）      | /boot （开机与核心档）       |                            |
| 可变动的（variable           | /var/mail （使用者邮件信箱） | /var/run （程序相关）/var/ |
| /var/spool/news （新闻群组） | /var/lock （程序相关）       |                            |

**文件的四个类型的意义：**

```
1.可分享的：可以分享给其他系统挂载使用的目录，所以包括可执行文件与使用者的邮件等数据， 是能够分享给网络上其他主机挂载用的目录；

2.不可分享的：自己机器上面运行的设备文件或者是与程序有关的socket文件等， 由于仅与自身机器有关，所以当然就不适合分享给其他主机了。

3.不变的：有些数据是不会经常变动的，跟随着distribution而不变动。 例如函数库、文件
说明文档、系统管理员所管理的主机服务配置文件等等；

4.可变动的：经常改变的数据，例如登录文件、一般用户可自行收受的新闻群组等。
```

**上述三个目录的定义;**

```
1.  / （root, 根目录）：与开机系统有关；
2.  /usr （unix software resource）：与软件安装/执行有关；
3.  /var （variable）：与系统运行过程有关。
```

- 根目录 **（/）** 的意义与内容：

  1.所有的目录都是由根目录衍生出来的。

  2.根目录与开机/还原/系统修复等动作有关。

  3.FHS标准建议：根目录（/）所在分区应该越小越好。（因为分区大了，数据多发生错误的机会大。

  | 目录       | 应放置文件内容                                               |
  | ---------- | ------------------------------------------------------------ |
  |            | 第一部份：FHS要求必须要存在的目录                            |
  | /bin       | 系统有很多放置可执行文件的目录，但/bin比较特殊。因为/bin放置的是在单人维护模式下还能够被操作的指令。 在/bin下面的指令可以被root与一般帐号所使用，主要有：cat, chmod, chown, date, mv, mkdir, cp, bash等等常用的指令。 |
  | /boot      | 这个目录主要在放置开机会使用到的文件，包括Linux核心文件以及开机菜单与开机所需配置文件等等。 Linux kernel常用的文件名为vmlinuz，如果使用的是grub2这个开机管理程序， 则还存在/boot/grub2/这个目录喔！ |
  | /dev       | 在Linux系统上，任何设备与周边设备都是以文件的型态存在于这个目录当中的。 你只要通过存取这个目录下面的某个文件，就等于存取某个设备啰～ 比要重要的文件有/dev/null, /dev/zero, /dev/tty, /dev/loop, /dev/sd等等 |
  | /etc       | 系统主要的配置文件几乎都放置在这个目录内，例如人员的帐号密码档、各种服务的启始档等等。一般来说，这个目录下的各文件属性是可以让一般使用者查阅的， 但是只有root有权力修改。FHS建议不要放置可可执行文件（binary）在这个目录中喔。比较重要的文件有： /etc/modprobe.d/,/etc/passwd, /etc/fstab, /etc/issue 等等。另外 FHS 还规范几个重要的目录最好要存在 /etc/ 目录下喔：/etc/opt（必要）：这个目录在放置第三方协力软件 /opt 的相关配置文件 /etc/X11/（建议）：与 X Window 有关的各种配置文件都在这里，尤其是 xorg.conf 这个 X Server 的配置文件。 /etc/sgml/（建议）：与 SGML 格式有关的各项配置文件 /etc/xml/（建议）：与 XML格式有关的各项配置文件 |
  | /lib       | 系统的函数库非常的多，而/lib放置的则是在开机时会用到的函数库， 以及在/bin或/sbin下面的指令会调用的函数库而已。 什么是函数库呢？你可以将他想成是“外挂”，某些指令必须要有这些“外挂”才能够顺利完成程序的执行之意。 另外 FSH 还要求下面的目录必须要存在：/lib/modules/：这个目录主要放置可抽换式的核心相关模块（驱动程序）喔！ |
  | /media     | media是“媒体”的英文，顾名思义，这个/media下面放置的就是可移除的设备啦！ 包括软盘、光盘、DVD等等设备都暂时挂载于此。常见的文件名有：/media/floppy, /media/cdrom等等。 |
  | /mnt       | 如果你想要暂时挂载某些额外的设备，一般建议你可以放置到这个目录中。在古早时候，这个目录的用途与/media相同啦！只是有了/media之后，这个目录就用来暂时挂载用了。 |
  | /opt       | 这个是给第三方协力软件放置的目录。什么是第三方协力软件啊？ 举例来说，KDE这个桌面管理系统是一个独立的计划，不过他可以安装到Linux系统中，因此KDE的软件就建议放置到此目录下了。 另外，如果你想要自行安装额外的软件（非原本的distribution提供的），那么也能够将你的软件安装到这里来。 不过，以前的Linux系统中，我们还是习惯放置在/usr/local目录下呢！ |
  | /run       | 早期的 FHS 规定系统开机后所产生的各项信息应该要放置到 /var/run 目录下，新版的 FHS 则规范到 /run 下面。 由于 /run 可以使用内存来仿真，因此性能上会好很多！ |
  | /srv       | srv可以视为“service”的缩写，是一些网络服务启动之后，这些服务所需要取用的数据目录。 常见的服务例如WWW, FTP等等。举例来说，WWW服务器需要的网页数据就可以放置在/srv/www/里面。 不过，系统的服务数据如果尚未要提供给网际网络任何人浏览的话，默认还是建议放置到 /var/lib下面即可。 |
  | /tmp       | 这是让一般使用者或者是正在执行的程序暂时放置文件的地方。 这个目录是任何人都能够存取的，所以你需要定期的清理一下。当然，重要数据不可放置在此目录啊！ 因为FHS甚至建议在开机时，应该要将/tmp下的数据都删除唷！ |
  |            | 第二部份：FHS建议可以存在的目录                              |
  | /home      | 这是系统默认的使用者主文件夹（home directory）。在你新增一个一般使用者帐号时， 默认的使用者主文件夹都会规范到这里来。比较重要的是，主文件夹有两种代号喔：~：代表目前这个使用者的主文件夹 ~dmtsai ：则代表 dmtsai 的主文件夹！ |
  | /lib<qual> | 用来存放与 /lib 不同的格式的二进制函数库，例如支持 64 位的 /lib64 函数库等 |
  | /root      | 系统管理员（root）的主文件夹。之所以放在这里，是因为如果进入单人维护模式而仅挂载根目录时， 该目录就能够拥有root的主文件夹，所以我们会希望root的主文件夹与根目录放置在同一个分区中。 |



- /usr 的意义与内容

  ​      1./usr里面放置的数据属于可分享的与不可变动的。

  ​      2.所有系统默认的软件（distribution发布者提供的软件）都会放置到/usr下面。

  | 目录            | 应放置文件内容                                               |
  | --------------- | ------------------------------------------------------------ |
  |                 | 第一部份：FHS 要求必须要存在的目录                           |
  | /usr/bin/       | 所有一般用户能够使用的指令都放在这里！目前新的 CentOS 7 已经将全部的使用者指令放置于此，而使用链接文件的方式将 /bin 链接至此！也就是说， /usr/bin 与 /bin 是一模一样了！另外，FHS 要求在此目录下不应该有子目录！ |
  | /usr/lib/       | 基本上，与 /lib 功能相同，所以 /lib 就是链接到此目录中的！   |
  | /usr/local/     | 系统管理员在本机自行安装自己下载的软件（非distribution默认提供者），建议安装到此目录， 这样会比较便于管理。举例来说，你的distribution提供的软件较旧，你想安装较新的软件但又不想移除旧版，此时你可以将新版软件安装于/usr/local/目录下，可与原先的旧版软件有分别啦！ 你可以自行到/usr/local去看看，该目录下也是具有bin, etc,include, lib...的次目录喔！ |
  | /usr/sbin/      | 非系统正常运行所需要的系统指令。最常见的就是某些网络服务器软件的服务指令（daemon）啰！不过基本功能与 /sbin 也差不多， 因此目前 /sbin 就是链接到此目录中的。 |
  | /usr/share/     | 主要放置只读架构的数据文件，当然也包括共享文件。在这个目录下放置的数据几乎是不分硬件架构均可读取的数据， 因为几乎都是文字文件嘛！在此目录下常见的还有这些次目录：/usr/share/man：线上说明文档 /usr/share/doc：软件杂项的文件说明 /usr/share/zoneinfo：与时区有关的时区文件 |
  |                 | 第二部份：FHS 建议可以存在的目录                             |
  | /usr/games/     | 与游戏比较相关的数据放置处                                   |
  | /usr/include/   | c/c++等程序语言的文件开始（header）与包含档（include）放置处，<br/>当我们以tarball方式 （*.tar.gz 的方式安装软件）安装某些数据时，会<br/>使用到里头的许多包含档喔！ |
  | /usr/libexec/   | 某些不被一般使用者惯用的可执行文件或脚本（script）等等，都会放<br/>置在此目录中。例如大部分的 X 窗口下面的操作指令， 很多都是放在<br/>此目录下的。 |
  | /usr/lib<qual>/ | 与 /lib<qual>/功能相同，因此目前 /lib<qual> 就是链接到此目录中 |
  | /usr/src/       | 一般源代码建议放置到这里，src有source的意思。至于核心源代码则<br/>建议放置到/usr/src/linux/目录下。 |



- /var 的意义与内容

  ​     /var目录主要针对常态性变动的文件。

  | 目录        | 应放置文件内容                                               |
  | ----------- | ------------------------------------------------------------ |
  |             | 第一部份：FHS要求必须要存在的目录                            |
  | /var/cache/ | 应用程序本身运行过程中会产生的一些暂存盘；                   |
  | /var/lib/   | 程序本身执行的过程中，需要使用到的数据文件放置的目录。在此目录下各自的软件应该要有各自的目录。 举例来说，MySQL的数据库放置到/var/lib/mysql/而rpm的数据库则放到/var/lib/rpm去！ |
  | /var/lock/  | 某些设备或者是文件资源一次只能被一个应用程序所使用，如果同时有两个程序使用该设备时， 就可能产生一些错误的状况，因此就得要将该设备上锁（lock），以确保该设备只会给单一软件所使用。 举例来说，烧录机正在烧录一块光盘，你想一下，会不会有两个人同时在使用一个烧录机烧片？ 如果两个人同时烧录，那片子写入的是谁的数据？所以当第一个人在烧录时该烧录机就会被上锁， 第二个人就得要该设备被解除锁定（就是前一个人用完了）才能够继续使用啰。目前此目录也已经挪到 /run/lock 中！ |
  | /var/log/   | 重要到不行！这是登录文件放置的目录！里面比较重要的文件如/var/log/messages, /var/log/wtmp（记录登陆者的信息）等。 |
  | /var/mail/  | 放置个人电子邮件信箱的目录，不过这个目录也被放置到/var/spool/mail/目录中！ 通常这两个目录是互为链接文件啦！ |
  | /var/run/   | 某些程序或者是服务启动后，会将他们的PID放置在这个目录下喔！至于PID的意义我们会在后续章节提到的。 与 /run 相同，这个目录链接到 /run去了！ |
  | /var/spool/ | 这个目录通常放置一些伫列数据，所谓的“伫列”就是排队等待其他程序使用的数据啦！ 这些数据被使用后通常都会被删除。举例来说，系统收到新信会放置到/var/spool/mail/中， 但使用者收下该信件后该封信原则上就会被删除。信件如果暂时寄不出去会被放到/var/spool/mqueue/中， 等到被送出后就被删除。如果是工作调度数据（crontab），就会被放置到/var/spool/cron/目录中！ |

  

## 二、目录树

- 目录树的启始点为根目录 （/, root）；
- 每一个目录不止能使用本地端的 partition 的文件系统，也可以使用网络上的 filesystem。
- 每一个文件在此目录树中的文件名（包含完整路径）都是独一无二的。

使用下列指令来查询目录树下面的数据:

```
[dmtsai@study ~]$ ls -l /
lrwxrwxrwx. 1 root root 7 May 4 17:51 bin -&gt; usr/bin
dr-xr-xr-x. 4 root root 4096 May 4 17:59 boot
drwxr-xr-x. 20 root root 3260 Jun 2 19:27 dev
drwxr-xr-x. 131 root root 8192 Jun 2 23:51 etc
drwxr-xr-x. 3 root root 19 May 4 17:56 home
lrwxrwxrwx. 1 root root 7 May 4 17:51 lib -&gt; usr/lib
lrwxrwxrwx. 1 root root 9 May 4 17:51 lib64 -&gt; usr/lib64
drwxr-xr-x. 2 root root 6 Jun 10 2014 media
drwxr-xr-x. 2 root root 6 Jun 10 2014 mnt
drwxr-xr-x. 3 root root 15 May 4 17:54 opt
dr-xr-xr-x. 154 root root 0 Jun 2 11:27 proc
dr-xr-x---. 5 root root 4096 Jun 3 00:04 root
drwxr-xr-x. 33 root root 960 Jun 2 19:27 run
lrwxrwxrwx. 1 root root 8 May 4 17:51 sbin -&gt; usr/sbin
drwxr-xr-x. 2 root root 6 Jun 10 2014 srv
dr-xr-xr-x. 13 root root 0 Jun 2 19:27 sys
drwxrwxrwt. 12 root root 4096 Jun 3 19:48 tmp
drwxr-xr-x. 13 root root 4096 May 4 17:51 usr
drwxr-xr-x. 22 root root 4096 Jun 2 19:27 var
```

目录树图解：



## 三、相对路径与绝对路径

- 绝对路径：由根目录（/）开始写起的文件名或目录名称， 例如 /home/dmtsai/.bashrc；

- 相对路径：相对于目前路径的文件名写法。 例如 ./home/dmtsai 或 ../../home/dmtsai/ 等
  等。反正开头不是 / 就属于相对路径的写法。
- **.** ：代表当前的目录，也可以使用 ./ 来表示；
- **..** ：代表上一层目录，也可以 ../ 来代表。


