# 创建计算字段



## 一、计算字段

- 计算字段并不实际存在于数据库表中，计算字段是运行时在`SELECT`语句内创建的。

- 只有数据库知道`SELECT`语句中哪些列是实际的表列，哪些列是计算字段。从客户机（如应用程序）的角度来看，计算字段的数据是以与其他列的数据相同的方式返回的。

- 客户机与服务器的格式 可在`SQL`语句内完成的许多转换和格式化工作都可以直接在客户机应用程序内完成。但一般来说，在数据库服务器上完成这些操作比在客户机中完成要快得多，因为`DBMS`是设计来快速有效地完成这种处理的。



## 二、拼接字段

- 拼接（`concatenate`） 将值联结到一起构成单个值。

- 在`MySQL`的`SELECT`语句中，可使用`Concat()`函数来拼接两个列。

> `MySQL`的不同之处 多数`DBMS`使用`+`或`||`来实现拼接，`MySQL`则使用`Concat()`函数来实现。

- 例如：

```mysql
SELECT Concat(vend_name, '(', vend_country, ')') FROM vendors ORDER BY vend_name;
```

> `Concat()`拼接串，即把多个串连接起来形成一个较长的串。`Concat()`需要一个或多个指定的串，各个串之间用逗号分隔。

- 别名（`alias`）是一个字段或值的替换名。别名用`AS`关键字赋予。请看下面的`SELECT`语句：

```mysql
SELECT Concat(PTrim(vend_name), '(', PTrim(vend_country), ")") AS vend_title FROM vendors ORDER BY vend_name;
```

> 别名的其他用途 别名还有其他用途。常见的用途包括在实际的表列名包含不符合规定的字符（如空格）时重新命名它，在原来的名字含混或容易误解时扩充它，等等。

- 导出列 别名有时也称为导出列（`derived column`），不管称为什么，它们所代表的都是相同的东西。



## 三、执行算术计算

- 举一个例子：

```mysql
SELECT prod_id, quantity, item_price FROM orderitems WHERE order_num = 20005;
```

- `item_price`列包含订单中每项物品的单价。如下汇总物品的价格（单价乘以订购数量）：

```mysql
SELECT prod_id, quantity, item_price, quantity * item_price AS expanded_price FROM orderitems WHERE order_num = 20005;
```

> 输出中显示的`expanded_price`列为一个计算字段，此计算为`quantity*item_price`。客户机应用现在可以使用这个新计算列，就像使用其他列一样。

- `MySQL`支持表中列出的基本算术操作符。此外，圆括号可用来区分优先顺序。

| 操作符 | 说明 |
| ------ | ---- |
| +      | 加   |
| -      | 减   |
| *      | 乘   |
| /      | 除   |

