# 检索数据



## 一、检索单个列

- `SELECT`语句，用途是从一个或多个表中检索信息。

- 例如：

```mysql
SELECT prod_name FROM products;
```

> 上述语句利用`SELECT` 语句从`products` 表中检索一个名为`prod_name`的列。

- 所需的列名在`SELECT`关键字之后给出，`FROM`关键字指出从其中检索数据的表名。

- 未排序数据：每次查询输出的数据顺序不同，出现这种情况很正常。返回数据的顺序可能是数据被添加到表中的顺序，也可能不是。只要返回相同数目的行，就是正常的。

- 结束`SQL`语句: 多条`SQL`语句必须以分号（；）分隔。不需要在单条`SQL`语句后加分号,如果你使用的是`mysql`命令行，必须加上分号来结束`SQL`语句。

- `SQL`语句和大小写 请注意，`SQL`语句不区分大小写，一般`SQL`关键字使用大写，而对所有列和表名使用小写。



## 二、检索多个列

- 要想从一个表中检索多个列，使用相同的`SELECT`语句。唯一的不同是必须在`SELECT`关键字后给出多个列名，列名之间必须以逗号分隔。

> 在选择多个列时，一定要在列名之间加上逗号，但最后一个列名后不加。如果在最后一个列名后加了逗号，将出现错误。

- 例如：

```mysql
SELECT prod_id, prod_name, prod_price FROM products;
```

> 这条语句使用`SELECT`语句从表`products`中选择数据。



## 三、检索所有列

- `SELECT`语句还可以检索所有的列而不必逐个列出它们。这可以通过在实际列名的位置使用星号`（*）`通配符来达到。
- 例如：

```mysql
SELECT * FROM products;
```

> 如果给定一个通配符`（*）`，则返回表中所有列。列的顺序一般是列在表定义中出现的顺序。但有时候并不是这样的，表的模式的变化（如添加或删除列）可能会导致顺序的变化。

- 一般，除非你确实需要表中的每个列，否则最好别使用`*`通配符, 因为检索不需要的列通常会降低检索和应用程序的性能。

- 检索未知列 使用通配符有一个大优点。由于不明确指定列名（因为星号检索每个列），所以能检索出名字未知的列。



## 四、检索不同的行

- 使用`DISTINCT`关键字，此关键字指示`MySQL`只返回不同的值。

- 例如：

```mysql
SELECT DISTINCT vend_id FROM products;
```

> `SELECT DISTINCT vend_id`告诉`MySQL`只返回不同（唯一）的`vend_id`行，

- 不能部分使用`DISTINCT DISTINCT`关键字应用于所有列而不仅是前置它的列。如果给出`SELECT DISTINCT vend_id`,`prod_price`，除非指定的两个列都不同，否则所有行都将被检索出来。



## 五、限制结果

- `SELECT`语句返回所有匹配的行，它们可能是指定表中的每个行。为了返回第一行或前几行，可使用`LIMIT`子句。
- 例如：

```mysql
SELECT prod_name FROM products LIMIT 5;
```

> 此语句使用`SELECT`语句检索单个列。`LIMIT 5`指示`MySQL`返回不多于`5`行。

- 为得出下一个`5`行，可指定要检索的开始行和行数，如下所示：

```mysql
SELECT prod_name FROM products LIMIT 5,5;
```

> `LIMIT 5`, `5`指示`MySQL`返回从行`5`开始的`5`行。第一个数为开始位置，第二个数为要检索的行数。

- 带一个值的`LIMIT`总是从第一行开始，给出的数为返回的行数。带两个值的`LIMIT`可以指定从行号为第一个值的位置开始。

- 行`0` :检索出来的第一行为行`0`而不是行`1`。因此，`LIMIT 1`, `1`将检索出第二行而不是第一行。

- 在行数不够时 `LIMIT`中指定要检索的行数为检索的最大行数。如果没有足够的行（例如，给出`LIMIT` `10`, `5`，但只有`13`行），`MySQL`将只返回它能返回的那么多行。

- `MySQL` `5`的LIMIT语法 `LIMIT` `3`, `4`的含义是从行`3`开始的`4`行,。`LIMIT 4 OFFSET 3`意为从行`3`开始取`4`行，就像`LIMIT 3, 4`一样。



## 六、使用完全限定的表名

- 可以使用完全限定的名字来引用列（同时使用表名和列字）。

- 看以下例子：

```mysql
SELECT products.prod_name FROM products;
```

> 这里指定了一个完全限定的列名。

- 表名也可以是完全限定的，如下所示：

```mysql
SELECT products.prod_name FROM crashcourse.products;
```

> 这条语句在功能上也等于刚使用的那条语句（当然，假定`products`表确实位于`crashcourse`数据库中）。



## 七、排序数据

- 下面的`SQL`语句返回某个数据库表的单个列。但看其输出，并没有特定的顺序。

```mysql
SELECT prod_name FROM products;
```

> 其实，检索出的数据并不是以纯粹的随机顺序显示的。如果不排序，数据一般将以它在底层表中出现的顺序显示。这可以是数据最初添加到表中的顺序

- 如果不明确控制的话，不能（也不应该）依赖该排序顺序。

- 子句`（clause）` `SQL`语句由子句构成，有些子句是必需的，而有的是可选的。
  - 一个子句通常由一个关键字和所提供的数据组成。
  - 子句的例子有`SELECT`语句的`FROM`子句。

- 为了明确地排序用`SELECT`语句检索出的数据，可使用`ORDER BY`子句。`ORDER BY`子句取一个或多个列的名字，据此对输出进行排序。

- 例如：

```mysql
SELECT prod_name FROM products ORDER BY prod name;
```

> 这条语句除了指示`MySQL`对`prod_name`列以字母顺序排序数据的`ORDER BY`子句外，与前面的语句相同。

- 通过非选择列进行排序 通常，`ORDER BY`子句中使用的列将是为显示所选择的列。但是，实际上并不一定要这样，用非检索的列排序数据是完全合法的。



## 八、按多个列排序

- 经常需要按不止一个列进行数据排序。为了按多个列排序，只要指定列名，列名之间用逗号分开即可（就
  像选择多个列时所做的那样）。

- 例如：

```mysql
SELECT prod_id, prod_price, prod_name FROM products ORDER BY prod_price, prod_name;
```



## 九、指定排序方向

- 数据排序不限于升序排序（从`A`到`Z`）。这只是默认的排序顺序，还可以使用`ORDER BY`子句以降序（从`Z`到`A`）顺序排序。为了进行降序排序，必须指定`DESC`关键字。

- 例如：

```mysql
SELECT prod_id, prod_price, prod_name FROM products ORDER BY prod_price DESC;
```

> `DESC`关键字只应用到直接位于其前面的列名。

- 与`DESC`相反的关键字是`ASC`（`ASCENDING`），在升序排序时可以指定它。但实际上，`ASC`没有多大用处，因为升序是默认的（如果既不指定`ASC`也不指定`DESC`，则假定为`ASC`）。

- `ORDER BY`子句的位置 在给出`ORDER BY`子句时，应该保证它位于`FROM`子句之后。如果使用`LIMIT`，它必须位于`ORDER BY`之后。使用子句的次序不对将产生错误消息。