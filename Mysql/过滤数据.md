# 过滤数据



## 一、使用WHERE子句

- 只检索所需数据需要指定搜索条件（`search criteria`），搜索条件也称为过滤条件（`filtercondition`）。

- 在`SELECT`语句中，数据根据`WHERE`子句中指定的搜索条件进行过滤。`WHERE`子句在表名（`FROM`子句）之后给出。
- 如下例子：

```mysql
SELECT prod_name, prod_price FROM products WHERE prod_price = 2.50;
```

> 这条语句从`products`表中检索两个列，但不返回所有行，只返回`prod_price`值为`2.50`的行。

- `WHERE`子句的位置 在同时使用`ORDER BY`和`WHERE`子句时，应该让`ORDER BY`位于`WHERE`之后，否则将会产生错误。



## 二、WHERE子句操作符

- `MySQL`支持下表列出的所有条件操作符：

- | 操 作 符 | 说 明              |
  | -------- | ------------------ |
  | =        | 等于               |
  | <>       | 不等于             |
  | !=       | 不等于             |
  | <        | 小于               |
  | <=       | 小于等于           |
  | >        | 大于               |
  | >=       | 大于等于           |
  | BETWEEN  | 在指定的两个值之间 |

- 检查单个值，下面的例子：

```mysql
SELECT prod_name, prod_price FROM products WHERE prod_name = 'fuses';
```

> 检查`WHERE` `prod_name`=‘`fuses`’语句，它返回`prod_name`的值为`Fuses`的一行。`MySQL`在执行匹配时默认不区分大小写，所以`fuses`与`Fuses`匹配。

- 不匹配检查,下面的例子：

```mysql
SELECT vend_id, prod_name FROM products WHERE vend_id <> 1003;
```

- 单引号用来限定字符串。如果将值与串类型的列进行比较，则需要限定引号。用来与数值列进行比较的值不用引号。

- 为了检查某个范围的值，可使用`BETWEEN`操作符。其语法与其他`WHERE`子句的操作符稍有不同，因为它需要两个值，即范围的开始值和结束值。

- 看如下的例子：

```mysql
SELECT prod_name, prod_price FROM products WHERE prod_price BETWEEN 5 AND 10;
```

> 这个例子说明如何使用`BETWEEN`操作符，它检索价格在`5`美元和`10`美元之间的所有产品。在使用`BETWEEN`时，必须指定两个值——所需范围的低端值和高端值。这两个值必须用`AND`关键字分隔。`BETWEEN`匹配范围中所有的值，包括指定的开始值和结束值。

- 在创建表时，表设计人员可以指定其中的列是否可以不包含值。在一个列不包含值时，称其为包含空值`NULL`。

> `NULL` 无值（`no value`），它与字段包含`0`、空字符串或仅仅包含空格不同。

- `NULL`与不匹配 在通过过滤选择出不具有特定值的行时，你可能希望返回具有`NULL`值的行。但是，不行。因为未知具有特殊的含义，数据库不知道它们是否匹配，所以在匹配过滤或不匹配过滤时不返回它们。因此，在过滤数据时，一定要验证返回数据中确实给出了被过滤列具有`NULL`的行。



## 三、组合WHERE

- 操作符（`operator`） 用来联结或改变`WHERE`子句中的子句的关键字。也称为逻辑操作符（`logical operator`）

- 为了通过不止一个列进行过滤，可使用`AND`操作符给`WHERE`子句附加条件。下面的代码给出了一个例子：

```mysql
SELECT prod_id, prod_price, prod_name FROM products WHERE vend_id = 103 AND prod_price <= 10;
```

> 这条`SELECT`语句中的`WHERE`子句包含两个条件，并且用`AND`关键字联结它们。`AND`指示`DBMS`只返回满足所有给定条件的行。

- 可以添加多个过滤条件，每添加一条就要使用一个`AND`。

- `OR`操作符与`AND`操作符不同，它指示`MySQL`检索匹配任一条件的行。

- 如下：

```mysql
SELECT prod_name, prod_price FROM products WHERE vend_id = 1002 OR vend_id = 1003;
```

> `OR`操作符告诉`DBMS`匹配任一条件而不是同时匹配两个条件。

- `WHERE`可包含任意数目的`AND`和`OR`操作符。允许两者结合以进行复杂和高级的过滤。

- `AND`在计算次序中优先级比`OR`高。

- 在`WHERE`子句中使用圆括号 任何时候使用具有`AND`和`OR`操作符的`WHERE`子句，都应该使用圆括号明确地分组操作符。不要过分依赖默认计算次序，即使它确实是你想要的东西也是如此。使用圆括号没有什么坏处，它能消除歧义。



## 四、IN操作符

- `IN`操作符用来指定条件范围，范围中的每个条件都可以进行匹配。`IN`取合法值的由逗号分隔的清单，全都括在圆括号中。
- 如下：

```mysql
SELECT prod_name, prod_price FROM products WHERE vend_id IN (1002, 1003) ORDER BY prod_name;
```

> `IN`操作符后跟由逗号分隔的合法值清单，整个清单必须括在圆括号中。

- 为什么要使用`IN`操作符？其优点具体如下。
  -  在使用长的合法选项清单时，`IN`操作符的语法更清楚且更直观。
  -  在使用`IN`时，计算的次序更容易管理（因为使用的操作符更少）。
  - `IN`操作符一般比`OR`操作符清单执行更快。
  - `IN`的最大优点是可以包含其他`SELECT`语句，使得能够更动态地建
    立`WHERE`子句。



## 五、NOT操作符

- `WHERE`子句中的`NOT`操作符有且只有一个功能，那就是否定它之后所跟的任何条件。

- 例如：

```mysql
SELECT prod_name, prod_price FROM products WHERE vend_id NOT IN (1002, 1003) ORDER BY name;
```

> `NOT`否定跟在它之后的条件，因此，`MySQL`不是匹配`1002`和`1003` 的`vend_id` ， 而是匹配`1002` 和`1003` 之外供应商的`vend_id`。

- `MySQL`中的`NOT MySQL`支持使用`NOT` 对`IN` 、`BETWEEN` 和`EXISTS`子句取反，这与多数其他`DBMS`允许使用`NOT`对各种条件取反有很大的差别。